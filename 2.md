### mongodb 简介
#### 数据库
mongodb的组成结构
时数据库包含集合，集合包含文档，文档包含一个或多个键值对。


数据库名可以使用满足以下条件的任意utf-8字符串来命名：
1、不可是空字符串（""）
2、不能含有''空格、.点、$、/、\、\0空字符
3、应该全部小写
4、最多64字节
// 因为数据库名最终会变成系统中的文件。

自带数据库

admin 超级管理员数据库

local 永远不会被复制，可用来存储限于本地单台服务器的任意集合。
config 当mongodb用于分片设置的时候，config数据库在内部使用，用于保存分片的相关信息。

集合

集合就是一组文档。

集合是无模式的。亦即，一个集合里的文档可以是各式各样的。和表的区别在于：表是有表头的，每一列存的什么信息都需要对应。
mongodb自动识别每个字段的类型。

集合不能是空字符串，不能含有空字符，这是为系统集合保留的前缀；不能以`system.`开头，不能含有保留字符$;


子集合

是集合下的另一个集合，惯例是用“.”字符分开命名来表示子集合。
如 forum的集合，论坛用户名集合可以是forum.user
forum这个集合跟他的子集合没有数据上的关系，子集合只是为了让数据组织结构更清晰。

####固定集合 capped
一般来说，适用于任何想要自动淘汰过期文档的场景，没有太多操作限制。

#### 文档

键值对按照bson格式组合起来存入mongodb就是一个文档。

文档的特点
1、每个文档都有一个特殊的键“_di”，他在文档所处的集合中是唯一的。
2、文档中的键值对是有序的，前后顺序不同就是不同的文档。
3、文档中键值对，值不仅可以是字符串，还可以是数值、日期等数据类型。
4、文档的键值对区分大小写。
5、文档的就知道不能用重复的键。

文档的键名命名规则

1、不能含有空字符
2、最好不含有.和$，其有特别 的含义。
3、键名最好不使用下划线“——”开头。

数据类型
js只支持64位浮点数
在mongodb中使用数字类型需要注意精度和极限值的问题。
默认情况下，mongodb中存储的是标准的时间，中国时间是东八区，将当前时间存入mongodb就会发现少8个小时。

普通内嵌文档读取方便，修改涉及数据量多。集合关联的方式修改方便，读取麻烦。

DBref 自动关联内嵌文档

mongodb中，单个的bson对象目前最大不可超过16MB。

#### 索引

类似于字典的目录
